<form
  #formRef="ngForm"
  (ngSubmit)="onSubmit(formRef)"
  class="mt-3"
  style="width: 50%; margin: auto"
>
  <div class="form-floating mb-3">
    <input
      type="text"
      required
      class="form-control"
      id="un"
      placeholder="Username"
      name="userName"
      ngModel
      #userName="ngModel"
      [class.is-valid]="userName.valid && !userFlag"
      [class.is-invalid]="(userName.invalid && userName.touched) || formRef.submitted || userFlag"
      (blur)="checkForUser(userName.value)"
    />
    <div id="un" class="invalid-feedback bg-warning m-0 fw-bolder">
      Please Enter valid Username
    </div>
    <label for="un">Username</label>
    <div class="text-danger bg-warning m-0 fw-bolder" style="font-size: small" *ngIf="userFlag">
      Username already taken. Please choose another
    </div>
  </div>

  <div class="form-floating mb-3">
    <input
      type="email"
      required
      class="form-control"
      id="em"
      placeholder="name@example.com"
      name="email"
      ngModel
      #email="ngModel"
      pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
      [class.is-valid]="email.valid"
      [class.is-invalid]="(email.invalid && email.touched) || formRef.submitted"
    />
    <div id="em" class="invalid-feedback bg-warning m-0 fw-bolder">
      Please Enter valid Email address
    </div>
    <label for="em">Email address</label>
  </div>

  <div class="form-floating">
    <input
      type="password"
      required
      class="form-control"
      id="pw"
      placeholder="Password"
      name="password"
      ngModel
      #password="ngModel"
      pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$"
      [class.is-valid]="password.valid"
      [class.is-invalid]="(password.invalid && password.touched) || formRef.submitted"
    />
    <div id="pw" class="invalid-feedback bg-warning m-0 fw-bolder">
      Password must contain atleast one Lowercase, Uppercase, Number, Special-character and length should be minimum 8 characters
    </div>
    <label for="pw">Password</label>
  </div>

  <div class="text-center mt-3">
    <button class="btn btn-success p-2">Register</button>
  </div>
</form>
